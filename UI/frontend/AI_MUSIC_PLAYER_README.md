# AI音乐管理器 - Windows版本

这是一个基于Flutter构建的Windows桌面音乐播放器，支持语音控制功能。

## 主要功能

### ✅ 已实现功能
1. **音乐文件管理**
   - 选择音乐文件夹
   - 自动扫描支持的音频格式（MP3, WAV, M4A, AAC, OGG）
   - 显示音乐文件列表

2. **音频播放控制**
   - 播放/暂停音乐
   - 上一首/下一首切换
   - 音量滑块控制
   - 播放进度显示和拖拽控制
   - 自动播放下一首

3. **语音控制**
   - 语音识别（中文支持）
   - 支持的语音指令：
     - "播放" / "开始" - 开始播放音乐
     - "暂停" / "停止" - 暂停播放
     - "下一首" / "下一个" - 播放下一首
     - "上一首" / "上一个" - 播放上一首
     - "音量大一点" - 增加音量
     - "音量小一点" - 减少音量

4. **用户界面**
   - 现代化Material Design 3界面
   - 深色/浅色主题自动切换
   - 流畅的动画效果
   - 响应式布局

## 技术栈

- **Flutter 3.13.0** - 跨平台UI框架
- **audioplayers 1.2.0** - 音频播放功能
- **speech_to_text 6.6.0** - 语音识别功能
- **file_picker 6.2.1** - 文件选择功能

## 运行要求

### 系统要求
- Windows 10 或更高版本
- 已安装 Visual Studio 2022 (包含C++工具)
- 已安装 Flutter SDK 3.13.0+

### 开发者模式（如需符号链接支持）
1. 按 Win+I 打开设置
2. 进入"更新和安全" -> "开发者选项"
3. 启用"开发者模式"
4. 重启计算机

## 使用说明

### 快速开始
1. 双击运行 `build_and_run.bat` 脚本
2. 或者在命令行中执行：
   ```bash
   flutter run -d windows
   ```

### 手动构建
```bash
# 1. 安装依赖
flutter pub get

# 2. 运行应用程序
flutter run -d windows

# 3. 构建发布版本
flutter build windows
```

### 使用步骤
1. **选择音乐文件夹**：点击"选择音乐文件夹"按钮
2. **播放音乐**：使用播放控制按钮或语音命令
3. **语音控制**：点击语音识别按钮并说出指令
4. **音量调节**：使用音量滑块或语音命令

## 已知问题和解决方案

### 1. Nuget下载失败
如果遇到"Nuget.exe not found"错误：
- 检查网络连接
- 稍后重试
- 或使用镜像源

### 2. 语音识别不工作
- 确保麦克风权限已授权
- 检查Windows语音识别设置
- 尝试使用中文语音命令

### 3. 音频播放失败
- 确保音频文件格式受支持
- 检查音频文件是否损坏
- 确保文件路径正确

## 文件结构

```
lib/
├── main.dart              # 主应用程序入口和UI实现
├── improved_main.dart     # 改进版本（实验性）
├── main_backup.dart       # 备份版本
└── simple_main.dart       # 简化版本

windows/                   # Windows平台特定代码
├── CMakeLists.txt         # CMake构建配置
└── runner/               # Windows运行器

build_and_run.bat         # 快速构建运行脚本
pubspec.yaml              # 依赖配置文件
```

## 开发说明

### 添加新功能
1. 在 `lib/main.dart` 中添加UI组件
2. 在对应的State类中实现功能逻辑
3. 更新语音命令处理函数 `_processVoiceCommand`

### 调试建议
- 使用 `flutter analyze` 检查代码问题
- 使用 `flutter doctor` 检查环境配置
- 查看控制台输出了解错误信息

## 许可证

此项目仅供学习和研究使用。

## 联系信息

如有问题或建议，请创建Issue或联系开发者。

---

**注意**：这是一个实验性项目，某些功能可能在不同Windows版本上表现不同。建议在测试环境中使用。